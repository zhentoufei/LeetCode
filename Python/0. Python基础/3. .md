### 1. å¦‚ä½•æ´¾ç”Ÿå†…ç½®ä¸å¯å˜ç±»å‹å¹¶ä¿®æ”¹å…¶å®ä¾‹åŒ–è¡Œä¸ºï¼Ÿ
**å®é™…æ¡ˆä¾‹**  
æˆ‘ä»¬æƒ³è‡ªå®šä¹‰ä¸€ç§æ–°ç±»å‹çš„å…ƒç»„ï¼Œå¯¹äºä¼ å…¥çš„å¯è¿­ä»£å¯¹è±¡ï¼Œæˆ‘ä»¬åªä¿ç•™åšå…¶ä¸­intç±»å‹ä¸”å€¼å¤§äº0çš„å…ƒç´ ï¼Œä¾‹å¦‚  
IntTuple([1, -1, 'abc', 6, ['x', 'y'], 3]) =>(1,6,3)  
*è¦æ±‚*  
IntTupleæ˜¯å†…ç½®tupleçš„å­ç±»ï¼Œå¦‚ä½•å®ç°ï¼Ÿ
```python
# coding:utf-8

class IntTuple(tuple):

    # è¿™ä¸ªnewæ‰æ˜¯å½“ä¹‹æ— æ„§çš„æ„é€ å™¨æ–¹æ³•
    def __new__(cls, iterable):
        # è¿™é‡Œçš„clsæ˜¯IntTupleè‡ªèº«
        g = (x for x in iterable if isinstance(x, int) and x > 0)
        return super(IntTuple, cls).__new__(cls, g)

    def __init__(self, iterable):
        # before
        super(IntTuple, self).__init__(iterable)
        # after


t = IntTuple([1, -1, 'abc', 6, ['x', 'y'], 3])
print t
```
### 2. å¦‚ä½•ä¸ºåˆ›å»ºå¤§é‡å®åŠ›èŠ‚çœå†…å­˜ï¼Ÿ
**å®é™…æ¡ˆä¾‹**  
æŸç½‘ç»œæ¸¸æˆä¸­ï¼Œå®šäº†ç©å®¶ç±»Playerï¼ˆid, name, status, ... ï¼‰æ¯å½“æœ‰ä¸€ä¸ªåœ¨çº¿ç©å®¶ï¼Œåœ¨æœåŠ¡å™¨çš„å†…å­˜é‡Œé¢å°±æœ‰ä¸€ä¸ªplayerçš„å®åŠ›ã€‚å½“å‰åœ¨çº¿äººæ•°å¾ˆå¤šçš„æ—¶å€™ï¼Œå°†äº§ç”Ÿå¤§é‡çš„å®ä¾‹ã€‚ï¼ˆå¦‚ç™¾ä¸‡çº§ï¼‰  
*å¦‚ä½•é™ä½è¿™äº›å¤§é‡å®ä¾‹çš„å†…å­˜å¼€é”€ï¼Ÿ*   
** è§£å†³æ–¹æ¡ˆ**  
å®šä¹‰ç±»çš„\__slots\__å±æ€§ï¼Œè¸å®é‡‡ç”¨æ¥å£°æ˜å®ä¾‹å±æ€§åå­—çš„åˆ—è¡¨
```python
# coding:utf-8


class Player(object):
    def __init__(self, uid, name, status=0, level=1):
        self.uid = uid
        self.name = name
        self.stat = status
        self.level = level


class Player2(object):
    __slots__ = ['uid', 'name', 'stat', 'level']

    def __init__(self, uid, name, status=0, level=1):
        self.uid = uid
        self.name = name
        self.stat = status
        self.level = level


p1 = Player('0001', 'Jim')  # p1çš„å†…å­˜ä½¿ç”¨æ¯”p2å¤š
p2 = Player2('0002', 'Jim')

# æŸ¥çœ‹äºŒè€…çš„å·®å¼‚
print set(dir(p1)) - set(dir(p2))

print p1.__dict__  # å®ç°åŠ¨æ€ç»‘å®šçš„å­—å…¸
# è¾“å‡º {'stat': 0, 'level': 1, 'uid': '0001', 'name': 'Jim'}

# æ€ä¹ˆä¸ªåŠ¨æ€ç»‘å®šå‘¢ï¼Ÿ
print p1
# è¾“å‡º error

p1.x = 123
# èµ‹å€¼æˆåŠŸ

print p1.__dict__
# è¾“å‡º {'x': 123, 'stat': 0, 'level': 1, 'uid': '0001', 'name': 'Jim'}


p1.__dict__['y'] = 99  # å¯ä»¥çš„e
del p1.x  # åˆ é™¤


# ä½†æ˜¯å¯¹äºp2å°±æ²¡åŠå®ç°ä¸Šé¢çš„åŠŸèƒ½ï¼Œæ¯•ç«Ÿå…³é—­äº†åŠ¨æ€ç»‘å®šå±æ€§çš„åŠŸèƒ½ï¼Œå ç”¨çš„å†…å­˜ä¹Ÿå°±å°‘äº†
```
### 3. å¦‚ä½•è®©å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†ï¼Ÿ
**å®é™…æ¡ˆä¾‹**  
æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªtelnetå®¢æˆ·ç«¯çš„ç±»TelnetClientï¼Œè°ƒç”¨å®ä¾‹çš„start()æ–¹æ³•å¯åŠ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’ï¼Œäº¤äº’å®Œæ¯•åéœ€è¦è°ƒç”¨cleanup()æ–¹æ³•ï¼Œå…³é—­å·²ç»è¿æ¥çš„socketï¼Œä»¥åŠå°†æ“ä½œå†å²å†™å…¥æ–‡ä»¶å¹¶å…³é—­
èƒ½å¦è®©TelnetClientçš„å®ä¾‹æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼Œä»è€Œä»£æ›¿æ‰‹å·¥è°ƒç”¨cleanup()æ–¹æ³•  
**è§£å†³æ–¹æ¡ˆ**  
å®ç°ä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼Œéœ€è¦å®šä¹‰å®ä¾‹çš„\__enter\__ï¼Œ \__exit\__æ–¹æ³•ï¼Œè®©ä»–ä»¬åˆ†åˆ«åœ¨withå¼€å§‹å’Œç»“æŸæ—¶è¢«è°ƒç”¨
```python
# coding:utf-8
# åŸå§‹çš„ä»£ç 
from telnetlib import Telnet
from sys import stdin, stdout
from collections import deque


class TelnetClient(object):
    def __init__(self, addr, port=23):
        self.addr = addr
        self.port = port
        self.tn = None

    def start(self):
        self.tn = Telnet(self.addr, self.port)
        self.history = deque()

        # user
        t = self.tn.read_until("login: ")
        stdout.write(t)
        user = stdin.readline()
        self.tn.write(user)

        # password
        t = self.tn.read_until("password: ")
        if t.startswith(user[:-1]):
            t = t[len(user) + 1:]
        stdout.write(t)
        self.tn.write(stdin.readline())

        t = self.tn.read_until('$ ')
        stdout.write(t)
        while True:
            uinput = stdin.readline()
            if not uinput:
                break
            self.history.append(uinput)
            self.tn.write(uinput)
            t = self.tn.read_until('$ ')
            stdout.write(t[len(uinput) + 1:])

    def cleanup(self):
        self.tn.close()
        self.tn = None
        with open(self.addr + '_history.txt', 'w') as f:
            f.writelines(self.history)


client = TelnetClient('127.0.0.1')
print '\nstart'
client.start()
print '\ncleanup'
client.cleanup()
```
```python
# coding:utf-8
# æ”¹å†™çš„ä»£ç 
from telnetlib import Telnet
from sys import stdin, stdout
from collections import deque


class TelnetClient(object):
    def __init__(self, addr, port=23):
        self.addr = addr
        self.port = port
        self.tn = None

    def start(self):

        # user
        t = self.tn.read_until("login: ")
        stdout.write(t)
        user = stdin.readline()
        self.tn.write(user)

        # password
        t = self.tn.read_until("password: ")
        if t.startswith(user[:-1]):
            t = t[len(user) + 1:]
        stdout.write(t)
        self.tn.write(stdin.readline())

        t = self.tn.read_until('$ ')
        stdout.write(t)
        while True:
            uinput = stdin.readline()
            if not uinput:
                break
            self.history.append(uinput)
            self.tn.write(uinput)
            t = self.tn.read_until('$ ')
            stdout.write(t[len(uinput) + 1:])

    def __enter__(self):
        self.tn = Telnet(self.addr, self.port)
        self.history = deque()
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        self.tn.close()
        self.tn = None
        with open(self.addr + '_history.txt', 'w') as f:
            f.writelines(self.history)


with TelnetClient('127.0.0.1') as client:
    # æ‰§è¡Œäº†withä¹‹åå…ˆè°ƒç”¨äº†__init__åˆå§‹åŒ–ï¼Œ
    # ç„¶å__enter__æ–¹æ³•, è¿”å›çš„ä¸œè¥¿å°±æ˜¯clientäº†
    client.start()
```
```python
# coding:utf-8
# æ”¹å†™çš„ä»£ç 
from telnetlib import Telnet
from sys import stdin, stdout
from collections import deque


class TelnetClient(object):
    def __init__(self, addr, port=23):
        self.addr = addr
        self.port = port
        self.tn = None

    def start(self):

        # æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œ
        # å¦‚æœåœ¨è¿™é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆåœ¨ä¸»ç¨‹åºä¸­ï¼Œæœ€åçš„endä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚
        # å¦‚æœæƒ³å‹åˆ¶å¼‚å¸¸ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨__exit__é‡Œé¢return True è¿”å›ä¸€ä¸ªçœŸå€¼å°±è¡Œäº†
        raise Exception('exp')
        # user
        t = self.tn.read_until("login: ")
        stdout.write(t)
        user = stdin.readline()
        self.tn.write(user)

        # password
        t = self.tn.read_until("password: ")
        if t.startswith(user[:-1]):
            t = t[len(user) + 1:]
        stdout.write(t)
        self.tn.write(stdin.readline())

        t = self.tn.read_until('$ ')
        stdout.write(t)
        while True:
            uinput = stdin.readline()
            if not uinput:
                break
            self.history.append(uinput)
            self.tn.write(uinput)
            t = self.tn.read_until('$ ')
            stdout.write(t[len(uinput) + 1:])

    def __enter__(self):
        self.tn = Telnet(self.addr, self.port)
        self.history = deque()
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        self.tn.close()
        self.tn = None
        with open(self.addr + '_history.txt', 'w') as f:
            f.writelines(self.history)

        # å¯¹äºè¿™é‡Œï¼Œpythonå®é™…ä¸Šè¿”å›çš„æ˜¯return None


with TelnetClient('127.0.0.1') as client:
    # æ‰§è¡Œäº†withä¹‹åå…ˆè°ƒç”¨äº†__init__åˆå§‹åŒ–ï¼Œ
    # ç„¶å__enter__æ–¹æ³•, è¿”å›çš„ä¸œè¥¿å°±æ˜¯clientäº†
    client.start()

print 'end'
```
### 4. å¦‚ä½•åˆ›å»ºå¯ç®¡ç†çš„å¯¹è±¡å±æ€§ï¼Ÿ
**å®é™…æ¡ˆä¾‹**  
åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬æŠŠæ–¹æ³•(å‡½æ•°)çœ‹ä½œå¯¹è±¡çš„æ¥å£ï¼Œç›´æ¥è®¿é—®å¯¹è±¡çš„å±æ€§å¯èƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œæˆ–è€…è®¾è®¡ä¸Šä¼šä¸å¤Ÿçµæ´»ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨è°ƒç”¨æ–¹æ³•åœ¨å½¢å¼ä¸Šä¸å¦‚è®¿é—®å±æ€§ç®€æ´
ä¾‹å¦‚ï¼š
circle.getRadius()
circle.setRadius(5.0) #ç¹ç

circle.radius
circle.radius = 5.0 # ç®€å•
èƒ½å¦åœ¨å½¢å¼ä¸Šæ˜¯å±æ€§è®¿é—®ï¼Œä½†æ˜¯å®é™…è°ƒç”¨æ–¹æ³•
**è§£å†³æ–¹æ¡ˆ**  
ä½¿ç”¨propertyå‡½æ•°ä¸ºç±»åˆ›å»ºå¯ç®¡ç†å±æ€§ï¼Œfget/gset/fdelå¯¹åº”ç›¸åº”çš„å±æ€§è®¿é—®	
```python
# coding:utf-8

from math import pi


class Circle(object):
    def __init__(self, radius):
        self.radius = radius

    def getRadius(self):
        return self.radius

    def setRadius(self, value):
        if not isinstance(value, (int, long, float)):
            raise ValueError('wrong type. ')
        self.radius = float(value)

    def getArea(self):
        return self.radius ** 2 * pi

    R = property(getRadius, setRadius)


# å¦‚æœä½¿ç”¨å±æ€§è®¿é—®
c = Circle(3.2)
c.radius = 'abc'
d = c.radius * 2
print d  # è¾“å‡º abcabc, é‚£ä¹ˆè¿™å°±å‡ºç°é”™è¯¯äº†

# ä½†æ˜¯å¦‚æœä½¿ç”¨æ–¹æ³•,å°±ä¼šè¢« if not isinstance(value, (int, long, float)):éªŒè¯

# ä¸‹é¢åˆ©ç”¨propertyå®ç°ä¸€ä¸‹
c = Circle(3.2)
print c.R  # è¾“å‡º3.2
c.R = 5.9
print c.R  # è¾“å‡º6.9

```

### 5.å¦‚ä½•è®©ç±»æ”¯æŒæ¯”è¾ƒæ“ä½œ
**å®é™…æ¡ˆä¾‹**  
æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›è‡ªå®šä¹‰çš„é¥¿ç±»ï¼Œå®ä¾‹é—´å¯ä»¥æ˜¯ä½¿ç”¨<, <=, >, >-, ==, !=ç¬¦å·è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬è‡ªå®šä¹‰æ¯”è¾ƒçš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªçŸ©å½¢çš„ç±»åˆ«ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯”è¾ƒä¸¤ä¸ªçŸ©å½¢çš„å®ä¾‹æ—¶ï¼Œæ¯”è¾ƒçš„æ˜¯ä»–ä»¬çš„é¢ç§¯
```python
# coding:utf-8

class Rectangle:
    def __init__(self, w, h):
        self.w = w
        self.h = h

    def area(self):
        return self.w * self.h


rec1 = Rectangle(5, 3)
rec2 = Rectangle(4, 4)
rec1>rec2  # rec1.area()>rec2.area()
```
**è§£å†³æ–¹æ¡ˆ**  
æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½ï¼Œéœ€è¦å®ç°ä»¥ä¸‹æ–¹æ³•ï¼š
\__lt\__, \__le\__,\__gt\__,\__ge\__,\__eq\__,\__nq\__
ä½¿ç”¨æ ‡å‡†åº“ä¸‹çš„functoolsä¸‹çš„ç±»è£…é¥°å™¨total_orderingå¯ä»¥ç®€åŒ–æ­¤è¿‡ç¨‹
```python
# coding:utf-8

# æ–¹æ³•1ï¼Œå†…ç½®æ–¹æ³•çš„é‡è½½
class Rectangle:
    def __init__(self, w, h):
        self.w = w
        self.h = h

    def area(self):
        return self.w * self.h

    def __lt__(self, obj):
        return self.area() < obj.area()

    def __le__(self, other):
        return self.area() <= other.area()

    def __gt__(self, other):
        return self.area() > other.area()

    def __ge__(self, other):
        return self.area() <= other.area()

    def __eq__(self, other):
        return self.area() == other.area()

    def __ne__(self, other):
        return self.area() != other.area()


rec1 = Rectangle(5, 3)
rec2 = Rectangle(4, 4)
```
```python
# coding:utf-8

# æ–¹æ³•2ï¼Œç®€åŒ–æ–¹æ³•1ï¼Œå†…ç½®æ–¹æ³•çš„é‡è½½
from functools import total_ordering
from abc import ABCMeta, abstractmethod


@total_ordering
class Shape(object):
    @abstractmethod
    def area(self):
        pass

    def __lt__(self, other):
        if not isinstance(other, Shape):
            raise TypeError('obj is not shape')
        return self.area() < other.area()

    def __eq__(self, other):
        if not isinstance(other, Shape):
            raise TypeError('obj is not shape')
        return self.area() == other.area()


class Rectangle(Shape):
    def __init__(self, w, h):
        self.w = w
        self.h = h

    def area(self):
        return self.w * self.h


class Circle(Shape):
    def __init__(self, r):
        self.r = r

    def area(self):
        return self.r ** 2 * 3.14

```
### 6. å¦‚ä½•ä½¿ç”¨æè¿°ç¬¦å¯¹å®ä¾‹å±æ€§åšç±»å‹æ£€æŸ¥ï¼Ÿ
**å®é™…æ¡ˆä¾‹**  
åœ¨æŸé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€äº›ç±»ï¼Œå¹¶å¸Œæœ›èƒ½åƒé™æ€ç±»å‹è¯­è¨€é‚£æ ·(C, C++, Java)å¯¹å®ƒä»¬çš„å®ä¾‹å±æ€§åšç±»å‹æ£€æŸ¥
p=Person()
p.name = 'Bob' #å¿…é¡»æ˜¯str
p.age = 18 #å¿…é¡»æ˜¯int
p.height = 1.83 #å¿…é¡»æ˜¯float
*è¦æ±‚*  
1. å¯ä»¥å®ä¾‹å˜é‡åæŒ‡å®šç±»å‹
2. èµ‹äºˆä¸æ­£ç¡®ç±»å‹æ—¶æŠ›å‡ºå¼‚å¸¸
**è§£å†³æ–¹æ¡ˆ**  
ä½¿ç”¨æè¿°ç¬¦æ¥å®ç°éœ€è¦ç±»å‹æ£€æŸ¥çš„å±æ€§ï¼šåˆ†åˆ«å®ç°\__get\__, \__set\__, \__delete\__æ–¹æ³•ï¼Œåœ¨\__set\__å†…ä½¿ç”¨isinstanceå‡½æ•°åšç±»å‹æ£€æŸ¥
```python
# coding:utf-8


class Attr(object):
    def __init__(self, name, type_):
        self.name = name
        self.type_ = type_

    def __get__(self, instance, owner):
        return instance.__dict__[self.name]

    def __set__(self, instance, value):
        if not isinstance(value, self.type_):
            raise TypeError('expected an %s' % self.type_)
        instance.__dict__[self.name] = value

    def __delete__(self, instance):
        del instance.__dict__[self.name]


class Person(object):
    name = Attr('name', str)
    age = Attr('age', int)
    height = Attr('height', float)


p = Person()
p.name = 'Bob'
print p.name
p.age = '1'  # Error
```
### 7. å¦‚ä½•åœ¨ç¯çŠ¶æ•°æ®ç»“æ„ä¸­ç®¡ç†å†…å­˜ï¼Ÿ
**å®é™…æ¡ˆä¾‹**  
åœ¨pythonä¸­ï¼Œåƒåœ¾å›æ”¶å™¨é€šè¿‡å¼•ç”¨æŠ€æœ¯æ¥å›æ”¶åƒåœ¾å¯¹è±¡ï¼Œä½†æ˜¯æŸäº›ç¯çŠ¶æ•°æ®ç»“æ„(æ ‘ï¼Œå›¾...)ï¼Œå­˜åœ¨å¯¹è±¡é—´çš„å¾ªç¯å¼•ç”¨ï¼Œæ¯”å¦‚æ ‘çš„çˆ¶èŠ‚ç‚¹å¼•ç”¨å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹åŒæ—¶ä¹Ÿå¼•ç”¨çˆ¶èŠ‚ã€‚åŒæ—¶delæ‰å¼•ç”¨çˆ¶å­èŠ‚ç‚¹ï¼Œä¸¤ä¸ªå¯¹è±¡ä¸èƒ½è¢«ç«‹å³å›æ”¶
å¦‚ä½•è§£å†³æ­¤ç±»çš„é—®é¢˜ï¼Ÿ  
**è§£å†³æ–¹æ¡ˆ**  
ä½¿ç”¨æ ‡å‡†åº“weakrefï¼Œä»–å¯ä»¥åˆ›å»ºä¸€ç§èƒ½å¤Ÿè®¿é—®å¯¹è±¡ä½†æ˜¯ä¸å¢åŠ å¼•ç”¨è®¡æ•°çš„å¯¹è±¡
```python
# coding:utf-8
# å…ˆçœ‹çœ‹ä¸€äº›å°ğŸŒ°
import sys


class A(object):
    def __del__(self):
        print 'in A.__del__'


a = A()
print sys.getrefcount(a)  # è¾“å‡ºç»“æœæ˜¯2ï¼Œå› ä¸ºæ­¤å¤„è¿˜åŒ…å«äº†ä¼ å…¥å‚æ•°çš„æ—¶å€™çš„å¼•ç”¨

a = 5  # è¾“å‡ºin A.__del__

```
```python
# coding:utf-8


class Data(object):
    def __init__(self, value, owner):
        self.owner = owner
        self.value = value

    def __str__(self):
        return '%s is dta, value is %s' % (self.owner, self.value)

    def __del__(self):
        print 'in Data.__del__'


class Node(object):
    def __init__(self, value):
        self.data = Data(value, self)

    def __del__(self):
        print 'In Node.__del__'


node = Node(100)
del node
raw_input('wait...')
# è¿è¡Œåä¸ä¼šæœ‰in Data.__del__æˆ–è€…In Node.__del__çš„è¾“å‡ºï¼Œè¯´æ˜å¹¶æ²¡æœ‰ç«‹å³é‡Šæ”¾æ‰
```
```python
# coding:utf-8
# ä¸‹é¢ä¸Šè§£å†³æ–¹æ¡ˆ
# å¼±å¼•ç”¨åœ¨å¯¹è±¡å­˜åœ¨çš„æ—¶å€™ï¼Œè¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¹è±¡ä¸å­˜åœ¨çš„æ—¶å€™å°±è¿”å›None
# ä½¿ç”¨æ ‡å‡†åº“weakrefï¼Œä»–å¯ä»¥åˆ›å»ºä¸€ç§èƒ½å¤Ÿè®¿é—®å¯¹è±¡ä½†æ˜¯ä¸å¢åŠ å¼•ç”¨è®¡æ•°çš„å¯¹è±¡
# å¯¹ä¸€ä¸ªå¯¹è±¡çš„å¼±å¼•ç”¨ã€‚ç›¸å¯¹äºé€šå¸¸çš„å¼•ç”¨æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå¸¸è§„çš„å¼•ç”¨ï¼Œ
# å®ƒæ˜¯ä¸ä¼šè¢«åƒåœ¾æ”¶é›†å™¨é”€æ¯çš„ï¼Œ
# ä½†æ˜¯å¦‚æœä¸€ä¸ªå¯¹è±¡åªå‰©ä¸‹ä¸€ä¸ªå¼±å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½è¢«åƒåœ¾æ”¶é›†å™¨æ”¶å›ã€‚


import weakref


class Data(object):
    def __init__(self, value, owner):
        self.owner = weakref.ref(owner)
        self.value = value

    def __str__(self):
        return '%s is dta, value is %s' % (self.owner(), self.value)

    def __del__(self):
        print 'in Data.__del__'


class Node(object):
    def __init__(self, value):
        self.data = Data(value, self)

    def __del__(self):
        print 'In Node.__del__'


node = Node(100)
del node
raw_input('wait...')
```